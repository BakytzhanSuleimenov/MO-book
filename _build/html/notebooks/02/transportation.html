
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>Transportation Models &#8212; Companion Notebooks for Mathematical Optimization</title>
    
  <link href="../../_static/css/theme.css" rel="stylesheet">
  <link href="../../_static/css/index.ff1ffe594081f20da1ef19478df9384b.css" rel="stylesheet">

    
  <link rel="stylesheet"
    href="../../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    
      

    
    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/sphinx-book-theme.css?digest=c3fdc42140077d1ad13ad2f1588a4309" />
    <link rel="stylesheet" type="text/css" href="../../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/panels-main.c949a650a448cc0ae9fd3441c0e17fb0.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/panels-variables.06eb56fa6e07937060861dad626602ad.css" />
    
  <link rel="preload" as="script" href="../../_static/js/index.be7d3bbb2ef33a8344ce.js">

    <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script src="../../_static/clipboard.min.js"></script>
    <script src="../../_static/copybutton.js"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../../_static/togglebutton.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script src="../../_static/sphinx-book-theme.d59cb220de22ca1c485ebbdc042f0030.js"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"
const thebe_selector = ".thebe,.cell"
const thebe_selector_input = "pre"
const thebe_selector_output = ".output, .cell_output"
</script>
    <script async="async" src="../../_static/sphinx-thebe.js"></script>
    <script src="https://unpkg.com/mermaid/dist/mermaid.min.js"></script>
    <script>mermaid.initialize({startOnLoad:true});</script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Making the Best of the Worst" href="making-the-best-of-the-worst.html" />
    <link rel="prev" title="A Wine Quality Dataset" href="regression-wine-quality.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="None">
    

    <!-- Google Analytics -->
    
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    
    <div class="container-fluid" id="banner"></div>

    

    <div class="container-xl">
      <div class="row">
          
<div class="col-12 col-md-3 bd-sidebar site-navigation show" id="site-navigation">
    
        <div class="navbar-brand-box">
    <a class="navbar-brand text-wrap" href="../../index.html">
      
        <!-- `logo` is deprecated in Sphinx 4.0, so remove this when we stop supporting 3 -->
        
      
      
      <img src="../../_static/logo-mo.png" class="logo" alt="logo">
      
      
      <h1 class="site-logo" id="site-title">Companion Notebooks for Mathematical Optimization</h1>
      
    </a>
</div><form class="bd-search d-flex align-items-center" action="../../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search this book..." aria-label="Search this book..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item active">
        <ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../../pyomo_style_guide.html">
   Pyomo Style Guide
  </a>
 </li>
</ul>
<ul class="current nav bd-sidenav">
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../01/01.00.html">
   1. Mathematical Optimization
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/>
  <label for="toctree-checkbox-1">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../01/alice-rose.html">
     Alice’s Rose
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../01/pop-up-shop.html">
     Scenario Analysis: Pop Up Shop
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 current active has-children">
  <a class="reference internal" href="02.00.html">
   2. Linear Optimization
  </a>
  <input checked="" class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" type="checkbox"/>
  <label for="toctree-checkbox-2">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul class="current">
   <li class="toctree-l2">
    <a class="reference internal" href="fit-absolute.html">
     Minimum Sum of Absolute Errors Regression
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="regression-wine-quality.html">
     A Wine Quality Dataset
    </a>
   </li>
   <li class="toctree-l2 current active">
    <a class="current reference internal" href="#">
     Transportation Models
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="making-the-best-of-the-worst.html">
     Making the Best of the Worst
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="mad-obtaining-historical-stock-prices.html">
     Download Historical Stock Data
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="mad-portfolio-optimization.html">
     MAD Portfolio Optimization
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="fractional-bim.html">
     Fractional BIM
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="large-example-chapter-2.html">
     Caroline’s raw material planning
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../03/03.00.html">
   3. Mixed Integer Linear Programming
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" type="checkbox"/>
  <label for="toctree-checkbox-3">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../03/cryptarithms.html">
     Cryptarithms: Send More Money
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../03/strip-packing.html">
     Strip Packing: Placing Boxes on a Shelf
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../03/simple-production-model-gdp.html">
     Production Model with Disjuncts
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../03/recharging-electric-vehicle.html">
     Recharging Strategy for an Electric Vehicle
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../03/shift-scheduling.html">
     Shift Scheduling
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../03/machine-scheduling.html">
     Machine Scheduling
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../03/job-shop-scheduling.html">
     Job Shop Scheduling
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../03/maintenance-planning.html">
     Maintenance Planning
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../03/large-example-chapter-3.html">
     BIM Production
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../04/04.00.html">
   4. Network Optimization
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" type="checkbox"/>
  <label for="toctree-checkbox-4">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../04/forex-arbitrage.html">
     Forex Arbitrage
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../04/cryptocurrency-arbitrage.html">
     Crypto Currency Analysis
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../05/05.00.html">
   5. Convex Optimization
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../06/06.00.html">
   6. Conic Optimization
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../07/07.00.html">
   7. Accounting for Uncertainty: Optimization Meets Reality
  </a>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../08/08.00.html">
   8. Robust Optimization - Single Stage Problems
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" type="checkbox"/>
  <label for="toctree-checkbox-5">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../08/ef-robust-optimization.html">
     Companion notebook to EF’s training on optimization with data uncertainty
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../09/09.00.html">
   9. Stochastic Optimization - Single Stage Problems
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../10/10.00.html">
   10. Robust Optimization - Two Stage Problems
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../11/11.00.html">
   11. Stochastic Optimization - Two Stage Problems
  </a>
 </li>
</ul>

    </div>
</nav> <!-- To handle the deprecated key -->

<div class="navbar_extra_footer">
  Powered by <a href="https://jupyterbook.org">Jupyter Book</a>
</div>

</div>


          


          
<main class="col py-md-3 pl-md-4 bd-content overflow-auto" role="main">
    
    <div class="topbar container-xl fixed-top">
    <div class="topbar-contents row">
        <div class="col-12 col-md-3 bd-topbar-whitespace site-navigation show"></div>
        <div class="col pl-md-4 topbar-main">
            
            <button id="navbar-toggler" class="navbar-toggler ml-0" type="button" data-toggle="collapse"
                data-toggle="tooltip" data-placement="bottom" data-target=".site-navigation" aria-controls="navbar-menu"
                aria-expanded="true" aria-label="Toggle navigation" aria-controls="site-navigation"
                title="Toggle navigation" data-toggle="tooltip" data-placement="left">
                <i class="fas fa-bars"></i>
                <i class="fas fa-arrow-left"></i>
                <i class="fas fa-arrow-up"></i>
            </button>
            
            
<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn" aria-label="Download this page"><i
            class="fas fa-download"></i></button>

    <div class="dropdown-buttons">
        <!-- ipynb file if we had a myst markdown file -->
        
        <!-- Download raw file -->
        <a class="dropdown-buttons" href="../../_sources/notebooks/02/transportation.ipynb"><button type="button"
                class="btn btn-secondary topbarbtn" title="Download source file" data-toggle="tooltip"
                data-placement="left">.ipynb</button></a>
        <!-- Download PDF via print -->
        <button type="button" id="download-print" class="btn btn-secondary topbarbtn" title="Print to PDF"
                onclick="printPdf(this)" data-toggle="tooltip" data-placement="left">.pdf</button>
    </div>
</div>

            <!-- Source interaction buttons -->

<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn"
        aria-label="Connect with source repository"><i class="fab fa-github"></i></button>
    <div class="dropdown-buttons sourcebuttons">
        <a class="repository-button"
            href="https://github.com/jckantor/MO-book"><button type="button" class="btn btn-secondary topbarbtn"
                data-toggle="tooltip" data-placement="left" title="Source repository"><i
                    class="fab fa-github"></i>repository</button></a>
        <a class="issues-button"
            href="https://github.com/jckantor/MO-book/issues/new?title=Issue%20on%20page%20%2Fnotebooks/02/transportation.html&body=Your%20issue%20content%20here."><button
                type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip" data-placement="left"
                title="Open an issue"><i class="fas fa-lightbulb"></i>open issue</button></a>
        
    </div>
</div>

            <!-- Full screen (wrap in <a> to have style consistency -->

<a class="full-screen-button"><button type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip"
        data-placement="bottom" onclick="toggleFullScreen()" aria-label="Fullscreen mode"
        title="Fullscreen mode"><i
            class="fas fa-expand"></i></button></a>

            <!-- Launch buttons -->

<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn"
        aria-label="Launch interactive content"><i class="fas fa-rocket"></i></button>
    <div class="dropdown-buttons">
        
        <a class="binder-button" href="https://mybinder.org/v2/gh/jckantor/MO-book/main?urlpath=tree/notebooks/02/transportation.ipynb"><button type="button"
                class="btn btn-secondary topbarbtn" title="Launch Binder" data-toggle="tooltip"
                data-placement="left"><img class="binder-button-logo"
                    src="../../_static/images/logo_binder.svg"
                    alt="Interact on binder">Binder</button></a>
        
        
        
        <a class="colab-button" href="https://colab.research.google.com/github/jckantor/MO-book/blob/main/notebooks/02/transportation.ipynb"><button type="button" class="btn btn-secondary topbarbtn"
                title="Launch Colab" data-toggle="tooltip" data-placement="left"><img class="colab-button-logo"
                    src="../../_static/images/logo_colab.png"
                    alt="Interact on Colab">Colab</button></a>
        
        
    </div>
</div>

        </div>

        <!-- Table of contents -->
        <div class="d-none d-md-block col-md-2 bd-toc show noprint">
            
            <div class="tocsection onthispage pt-5 pb-3">
                <i class="fas fa-list"></i> Contents
            </div>
            <nav id="bd-toc-nav" aria-label="Page">
                <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#distributing-gasoline-to-franchise-operators">
   Distributing Gasoline to Franchise Operators
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#task">
     Task
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#analysis">
     Analysis
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#reporting-solutions">
   Reporting Solutions
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#pyomo-display-method">
     Pyomo
     <code class="docutils literal notranslate">
      <span class="pre">
       .display()
      </span>
     </code>
     method
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#manually-formatted-reports">
     Manually formatted reports
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#pandas">
     Pandas
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#graphviz">
     Graphviz
    </a>
   </li>
  </ul>
 </li>
</ul>

            </nav>
        </div>
    </div>
</div>
    <div id="main-content" class="row">
        <div class="col-12 col-md-9 pl-md-3 pr-md-0">
            <!-- Table of contents that is only displayed when printing the page -->
            <div id="jb-print-docs-body" class="onlyprint">
                <h1>Transportation Models</h1>
                <!-- Table of contents -->
                <div id="print-main-content">
                    <div id="jb-print-toc">
                        
                        <div>
                            <h2> Contents </h2>
                        </div>
                        <nav aria-label="Page">
                            <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#distributing-gasoline-to-franchise-operators">
   Distributing Gasoline to Franchise Operators
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#task">
     Task
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#analysis">
     Analysis
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#reporting-solutions">
   Reporting Solutions
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#pyomo-display-method">
     Pyomo
     <code class="docutils literal notranslate">
      <span class="pre">
       .display()
      </span>
     </code>
     method
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#manually-formatted-reports">
     Manually formatted reports
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#pandas">
     Pandas
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#graphviz">
     Graphviz
    </a>
   </li>
  </ul>
 </li>
</ul>

                        </nav>
                    </div>
                </div>
            </div>
            
              <div>
                
  <section class="tex2jax_ignore mathjax_ignore" id="transportation-models">
<h1>Transportation Models<a class="headerlink" href="#transportation-models" title="Permalink to this headline">¶</a></h1>
<p>This notebook presents a transportation model to optimally allocate the delivery of a commodity from multiple sources to multiple destinations. The notebook also presents techniques for Pyomo modeling and reporting including:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">pyo.Expression</span></code> decorator</p></li>
<li><p>Accessing the duals (i.e., shadow prices)</p></li>
<li><p>Methods for reporting the solution and duals.</p>
<ul>
<li><p>Pyomo <code class="docutils literal notranslate"><span class="pre">.display()</span></code> method for Pyomo objects</p></li>
<li><p>Manually formatted reports</p></li>
<li><p>Pandas</p></li>
<li><p>Graphviz for display of results as a directed graph.</p></li>
</ul>
</li>
</ul>
<p>The model invites a discussion of the pitfalls in optimizing a global objective for customers who may have an uneven share of the resulting benefits.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">sys</span>
<span class="k">if</span> <span class="s2">&quot;google.colab&quot;</span> <span class="ow">in</span> <span class="n">sys</span><span class="o">.</span><span class="n">modules</span><span class="p">:</span>
    <span class="o">!</span>wget -N -q https://raw.githubusercontent.com/jckantor/MO-book/main/tools/install_on_colab.py 
    <span class="o">%</span><span class="k">run</span> install_on_colab.py
</pre></div>
</div>
</div>
</div>
<section id="distributing-gasoline-to-franchise-operators">
<h2>Distributing Gasoline to Franchise Operators<a class="headerlink" href="#distributing-gasoline-to-franchise-operators" title="Permalink to this headline">¶</a></h2>
<p>YaYa Gas-n-Grub is franchisor and operator for a network of regional convenience stores selling gasoline and convenience items in the United States. Each store is individually owned by a YaYa Gas-n-Grub franchisee who pays a fixed fee to the franchisor for services.</p>
<p>Gasoline is delivered by truck from regional distribution terminals. Each delivery truck carrys 8,000 gallons delivered at a fixed charge of 700 dollars per delivery, or 8.75 cents per gallon. The franchise owners are eager to reduce delivery costs to boost profits.</p>
<p>YaYa Gas-n-Grub decides to accept proposals from other distribution terminals, “A” and “B”, to supply the franchise operators. They each provide delivery pricing based on location. Since they already have existing customers, “A” and “B” can only provide a limited amount of gasoline to new customers, 100,000 and 150,000 gallons respectively. The only difference between the new suppliers and the current supplier is the delivery charge.</p>
<p>The following chart shows the pricing of gasoline delivery in cents/gallon.</p>
<table class="colwidths-auto table">
<thead>
<tr class="row-odd"><th class="text-align:left head"><p>Store Owner</p></th>
<th class="text-align:right head"><p>Demand</p></th>
<th class="text-align:right head"><p>Terminal A</p></th>
<th class="text-align:right head"><p>Terminal B</p></th>
<th class="text-align:right head"><p>Current Supplier</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="text-align:left"><p>Alice</p></td>
<td class="text-align:right"><p>30,000</p></td>
<td class="text-align:right"><p>8.3</p></td>
<td class="text-align:right"><p>10.2</p></td>
<td class="text-align:right"><p>8.75</p></td>
</tr>
<tr class="row-odd"><td class="text-align:left"><p>Badri</p></td>
<td class="text-align:right"><p>40,000</p></td>
<td class="text-align:right"><p>8.1</p></td>
<td class="text-align:right"><p>12.0</p></td>
<td class="text-align:right"><p>8.75</p></td>
</tr>
<tr class="row-even"><td class="text-align:left"><p>Cara</p></td>
<td class="text-align:right"><p>50,000</p></td>
<td class="text-align:right"><p>8.3</p></td>
<td class="text-align:right"><p>-</p></td>
<td class="text-align:right"><p>8.75</p></td>
</tr>
<tr class="row-odd"><td class="text-align:left"><p>Dan</p></td>
<td class="text-align:right"><p>80,000</p></td>
<td class="text-align:right"><p>9.3</p></td>
<td class="text-align:right"><p>8.0</p></td>
<td class="text-align:right"><p>8.75</p></td>
</tr>
<tr class="row-even"><td class="text-align:left"><p>Emma</p></td>
<td class="text-align:right"><p>30,000</p></td>
<td class="text-align:right"><p>10.1</p></td>
<td class="text-align:right"><p>10.0</p></td>
<td class="text-align:right"><p>8.75</p></td>
</tr>
<tr class="row-odd"><td class="text-align:left"><p>Fujita</p></td>
<td class="text-align:right"><p>45,000</p></td>
<td class="text-align:right"><p>9.8</p></td>
<td class="text-align:right"><p>10.0</p></td>
<td class="text-align:right"><p>8.75</p></td>
</tr>
<tr class="row-even"><td class="text-align:left"><p>Grace</p></td>
<td class="text-align:right"><p>80,000</p></td>
<td class="text-align:right"><p>-</p></td>
<td class="text-align:right"><p>8.0</p></td>
<td class="text-align:right"><p>8.75</p></td>
</tr>
<tr class="row-odd"><td class="text-align:left"><p>Helen</p></td>
<td class="text-align:right"><p>18,000</p></td>
<td class="text-align:right"><p>7.5</p></td>
<td class="text-align:right"><p>10.0</p></td>
<td class="text-align:right"><p>8.75</p></td>
</tr>
<tr class="row-even"><td class="text-align:left"><p><strong>TOTALS</strong></p></td>
<td class="text-align:right"><p>313,000</p></td>
<td class="text-align:right"><p>100,000</p></td>
<td class="text-align:right"><p>150,000</p></td>
<td class="text-align:right"><p>500, 000</p></td>
</tr>
</tbody>
</table>
<section id="task">
<h3>Task<a class="headerlink" href="#task" title="Permalink to this headline">¶</a></h3>
<p>As operator of YaYa Gas-n-Grub, allocate the delivery of gasoline to minimize overall cost to the frachise owners.</p>
</section>
<section id="analysis">
<h3>Analysis<a class="headerlink" href="#analysis" title="Permalink to this headline">¶</a></h3>
<p>The following model presents a global objective to minimize the total cost of delivery to all franchise owners. But there is no guarantee that each owner will benefit equally or at all. Suppose, for example, that a majority of the franchise owners must agree with the new contract in order to proceed. Will the franchise owers agree?  Who might object to the new arrangment? Could the model be modified to assure that each operator gains at least some share of the global objective?</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>

<span class="n">rates</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span>
    <span class="s2">&quot;Alice&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;Terminal A&quot;</span><span class="p">:</span> <span class="mf">8.3</span><span class="p">,</span> <span class="s2">&quot;Terminal B&quot;</span><span class="p">:</span> <span class="mf">10.2</span><span class="p">,</span> <span class="s2">&quot;Current Supplier&quot;</span><span class="p">:</span> <span class="mf">8.75</span><span class="p">},</span>
    <span class="s2">&quot;Badri&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;Terminal A&quot;</span><span class="p">:</span> <span class="mf">8.1</span><span class="p">,</span> <span class="s2">&quot;Terminal B&quot;</span><span class="p">:</span> <span class="mf">12.0</span><span class="p">,</span> <span class="s2">&quot;Current Supplier&quot;</span><span class="p">:</span> <span class="mf">8.75</span><span class="p">},</span>
    <span class="s2">&quot;Cara&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;Terminal A&quot;</span><span class="p">:</span> <span class="mf">8.3</span><span class="p">,</span> <span class="s2">&quot;Terminal B&quot;</span><span class="p">:</span> <span class="mi">100</span><span class="p">,</span> <span class="s2">&quot;Current Supplier&quot;</span><span class="p">:</span> <span class="mf">8.75</span><span class="p">},</span>
    <span class="s2">&quot;Dan&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;Terminal A&quot;</span><span class="p">:</span> <span class="mf">9.3</span><span class="p">,</span> <span class="s2">&quot;Terminal B&quot;</span><span class="p">:</span> <span class="mf">8.0</span><span class="p">,</span> <span class="s2">&quot;Current Supplier&quot;</span><span class="p">:</span> <span class="mf">8.75</span><span class="p">},</span>
    <span class="s2">&quot;Emma&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;Terminal A&quot;</span><span class="p">:</span> <span class="mf">10.1</span><span class="p">,</span> <span class="s2">&quot;Terminal B&quot;</span><span class="p">:</span> <span class="mf">10.0</span><span class="p">,</span> <span class="s2">&quot;Current Supplier&quot;</span><span class="p">:</span> <span class="mf">8.75</span><span class="p">},</span>
    <span class="s2">&quot;Fujita&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;Terminal A&quot;</span><span class="p">:</span> <span class="mf">9.8</span><span class="p">,</span> <span class="s2">&quot;Terminal B&quot;</span><span class="p">:</span> <span class="mf">10.0</span><span class="p">,</span> <span class="s2">&quot;Current Supplier&quot;</span><span class="p">:</span> <span class="mf">8.75</span><span class="p">},</span>
    <span class="s2">&quot;Grace&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;Terminal A&quot;</span><span class="p">:</span> <span class="mi">100</span><span class="p">,</span> <span class="s2">&quot;Terminal B&quot;</span><span class="p">:</span> <span class="mf">8.0</span><span class="p">,</span> <span class="s2">&quot;Current Supplier&quot;</span><span class="p">:</span> <span class="mf">8.75</span><span class="p">},</span>
    <span class="s2">&quot;Helen&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;Terminal A&quot;</span><span class="p">:</span> <span class="mf">7.5</span><span class="p">,</span> <span class="s2">&quot;Terminal B&quot;</span><span class="p">:</span> <span class="mf">10.0</span><span class="p">,</span> <span class="s2">&quot;Current Supplier&quot;</span><span class="p">:</span> <span class="mf">8.75</span><span class="p">}})</span><span class="o">.</span><span class="n">T</span>

<span class="n">display</span><span class="p">(</span><span class="n">rates</span><span class="p">)</span>

<span class="n">demand</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">({</span>
    <span class="s2">&quot;Alice&quot;</span><span class="p">:</span> <span class="mi">30000</span><span class="p">,</span>
    <span class="s2">&quot;Badri&quot;</span><span class="p">:</span> <span class="mi">40000</span><span class="p">,</span>
    <span class="s2">&quot;Cara&quot;</span><span class="p">:</span> <span class="mi">50000</span><span class="p">,</span>
    <span class="s2">&quot;Dan&quot;</span><span class="p">:</span> <span class="mi">20000</span><span class="p">,</span>
    <span class="s2">&quot;Emma&quot;</span><span class="p">:</span> <span class="mi">30000</span><span class="p">,</span>
    <span class="s2">&quot;Fujita&quot;</span><span class="p">:</span> <span class="mi">45000</span><span class="p">,</span>
    <span class="s2">&quot;Grace&quot;</span><span class="p">:</span> <span class="mi">80000</span><span class="p">,</span>
    <span class="s2">&quot;Helen&quot;</span><span class="p">:</span> <span class="mi">18000</span><span class="p">})</span>

<span class="n">supply</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">({</span>
    <span class="s2">&quot;Terminal A&quot;</span><span class="p">:</span> <span class="mi">100000</span><span class="p">,</span>
    <span class="s2">&quot;Terminal B&quot;</span><span class="p">:</span> <span class="mi">80000</span><span class="p">,</span>
    <span class="s2">&quot;Current Supplier&quot;</span><span class="p">:</span> <span class="mi">500000</span><span class="p">})</span>

<span class="n">fix</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<span class="n">demand</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">kind</span><span class="o">=</span><span class="s2">&quot;bar&quot;</span><span class="p">,</span> <span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">title</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;Demand = </span><span class="si">{</span><span class="n">demand</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="n">supply</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">kind</span><span class="o">=</span><span class="s2">&quot;bar&quot;</span><span class="p">,</span> <span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">title</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;Supply = </span><span class="si">{</span><span class="n">supply</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Terminal A</th>
      <th>Terminal B</th>
      <th>Current Supplier</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>Alice</th>
      <td>8.3</td>
      <td>10.2</td>
      <td>8.75</td>
    </tr>
    <tr>
      <th>Badri</th>
      <td>8.1</td>
      <td>12.0</td>
      <td>8.75</td>
    </tr>
    <tr>
      <th>Cara</th>
      <td>8.3</td>
      <td>100.0</td>
      <td>8.75</td>
    </tr>
    <tr>
      <th>Dan</th>
      <td>9.3</td>
      <td>8.0</td>
      <td>8.75</td>
    </tr>
    <tr>
      <th>Emma</th>
      <td>10.1</td>
      <td>10.0</td>
      <td>8.75</td>
    </tr>
    <tr>
      <th>Fujita</th>
      <td>9.8</td>
      <td>10.0</td>
      <td>8.75</td>
    </tr>
    <tr>
      <th>Grace</th>
      <td>100.0</td>
      <td>8.0</td>
      <td>8.75</td>
    </tr>
    <tr>
      <th>Helen</th>
      <td>7.5</td>
      <td>10.0</td>
      <td>8.75</td>
    </tr>
  </tbody>
</table>
</div></div><img alt="../../_images/transportation_3_1.png" src="../../_images/transportation_3_1.png" />
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pyomo.environ</span> <span class="k">as</span> <span class="nn">pyo</span>

<span class="k">def</span> <span class="nf">transport</span><span class="p">(</span><span class="n">supply</span><span class="p">,</span> <span class="n">demand</span><span class="p">,</span> <span class="n">rates</span><span class="p">):</span>
    <span class="n">m</span> <span class="o">=</span> <span class="n">pyo</span><span class="o">.</span><span class="n">ConcreteModel</span><span class="p">()</span>

    <span class="n">m</span><span class="o">.</span><span class="n">SOURCES</span> <span class="o">=</span> <span class="n">pyo</span><span class="o">.</span><span class="n">Set</span><span class="p">(</span><span class="n">initialize</span><span class="o">=</span><span class="n">rates</span><span class="o">.</span><span class="n">columns</span><span class="p">)</span>
    <span class="n">m</span><span class="o">.</span><span class="n">DESTINATIONS</span> <span class="o">=</span> <span class="n">pyo</span><span class="o">.</span><span class="n">Set</span><span class="p">(</span><span class="n">initialize</span><span class="o">=</span><span class="n">rates</span><span class="o">.</span><span class="n">index</span><span class="p">)</span>

    <span class="n">m</span><span class="o">.</span><span class="n">x</span> <span class="o">=</span> <span class="n">pyo</span><span class="o">.</span><span class="n">Var</span><span class="p">(</span><span class="n">m</span><span class="o">.</span><span class="n">DESTINATIONS</span><span class="p">,</span> <span class="n">m</span><span class="o">.</span><span class="n">SOURCES</span><span class="p">,</span> <span class="n">domain</span><span class="o">=</span><span class="n">pyo</span><span class="o">.</span><span class="n">NonNegativeReals</span><span class="p">)</span>

    <span class="nd">@m</span><span class="o">.</span><span class="n">Param</span><span class="p">(</span><span class="n">m</span><span class="o">.</span><span class="n">DESTINATIONS</span><span class="p">,</span> <span class="n">m</span><span class="o">.</span><span class="n">SOURCES</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">Rates</span><span class="p">(</span><span class="n">m</span><span class="p">,</span> <span class="n">dst</span><span class="p">,</span> <span class="n">src</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">rates</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">dst</span><span class="p">,</span> <span class="n">src</span><span class="p">]</span>

    <span class="nd">@m</span><span class="o">.</span><span class="n">Objective</span><span class="p">(</span><span class="n">sense</span><span class="o">=</span><span class="n">pyo</span><span class="o">.</span><span class="n">minimize</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">cost</span><span class="p">(</span><span class="n">m</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">sum</span><span class="p">(</span><span class="n">m</span><span class="o">.</span><span class="n">Rates</span><span class="p">[</span><span class="n">dst</span><span class="p">,</span> <span class="n">src</span><span class="p">]</span><span class="o">*</span><span class="n">m</span><span class="o">.</span><span class="n">x</span><span class="p">[</span><span class="n">dst</span><span class="p">,</span> <span class="n">src</span><span class="p">]</span> <span class="k">for</span> <span class="n">dst</span><span class="p">,</span> <span class="n">src</span> <span class="ow">in</span> <span class="n">m</span><span class="o">.</span><span class="n">DESTINATIONS</span> <span class="o">*</span> <span class="n">m</span><span class="o">.</span><span class="n">SOURCES</span><span class="p">)</span>
    
    <span class="nd">@m</span><span class="o">.</span><span class="n">Expression</span><span class="p">(</span><span class="n">m</span><span class="o">.</span><span class="n">DESTINATIONS</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">cost_to</span><span class="p">(</span><span class="n">m</span><span class="p">,</span> <span class="n">dst</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">sum</span><span class="p">(</span><span class="n">m</span><span class="o">.</span><span class="n">Rates</span><span class="p">[</span><span class="n">dst</span><span class="p">,</span> <span class="n">src</span><span class="p">]</span><span class="o">*</span><span class="n">m</span><span class="o">.</span><span class="n">x</span><span class="p">[</span><span class="n">dst</span><span class="p">,</span> <span class="n">src</span><span class="p">]</span> <span class="k">for</span> <span class="n">src</span> <span class="ow">in</span> <span class="n">m</span><span class="o">.</span><span class="n">SOURCES</span><span class="p">)</span>

    <span class="nd">@m</span><span class="o">.</span><span class="n">Expression</span><span class="p">(</span><span class="n">m</span><span class="o">.</span><span class="n">DESTINATIONS</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">shipped_to</span><span class="p">(</span><span class="n">m</span><span class="p">,</span> <span class="n">dst</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">sum</span><span class="p">(</span><span class="n">m</span><span class="o">.</span><span class="n">x</span><span class="p">[</span><span class="n">dst</span><span class="p">,</span> <span class="n">src</span><span class="p">]</span> <span class="k">for</span> <span class="n">src</span> <span class="ow">in</span> <span class="n">m</span><span class="o">.</span><span class="n">SOURCES</span><span class="p">)</span>

    <span class="nd">@m</span><span class="o">.</span><span class="n">Expression</span><span class="p">(</span><span class="n">m</span><span class="o">.</span><span class="n">SOURCES</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">shipped_from</span><span class="p">(</span><span class="n">m</span><span class="p">,</span> <span class="n">src</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">sum</span><span class="p">(</span><span class="n">m</span><span class="o">.</span><span class="n">x</span><span class="p">[</span><span class="n">dst</span><span class="p">,</span> <span class="n">src</span><span class="p">]</span> <span class="k">for</span> <span class="n">dst</span> <span class="ow">in</span> <span class="n">m</span><span class="o">.</span><span class="n">DESTINATIONS</span><span class="p">)</span>

    <span class="nd">@m</span><span class="o">.</span><span class="n">Constraint</span><span class="p">(</span><span class="n">m</span><span class="o">.</span><span class="n">SOURCES</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">supply_constraint</span><span class="p">(</span><span class="n">m</span><span class="p">,</span> <span class="n">src</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">m</span><span class="o">.</span><span class="n">shipped_from</span><span class="p">[</span><span class="n">src</span><span class="p">]</span> <span class="o">&lt;=</span> <span class="n">supply</span><span class="p">[</span><span class="n">src</span><span class="p">]</span>

    <span class="nd">@m</span><span class="o">.</span><span class="n">Constraint</span><span class="p">(</span><span class="n">m</span><span class="o">.</span><span class="n">DESTINATIONS</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">demand_constraint</span><span class="p">(</span><span class="n">m</span><span class="p">,</span> <span class="n">dst</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">m</span><span class="o">.</span><span class="n">shipped_to</span><span class="p">[</span><span class="n">dst</span><span class="p">]</span> <span class="o">&gt;=</span> <span class="n">demand</span><span class="p">[</span><span class="n">dst</span><span class="p">]</span>

    <span class="n">m</span><span class="o">.</span><span class="n">dual</span> <span class="o">=</span> <span class="n">pyo</span><span class="o">.</span><span class="n">Suffix</span><span class="p">(</span><span class="n">direction</span><span class="o">=</span><span class="n">pyo</span><span class="o">.</span><span class="n">Suffix</span><span class="o">.</span><span class="n">IMPORT</span><span class="p">)</span>
    <span class="n">pyo</span><span class="o">.</span><span class="n">SolverFactory</span><span class="p">(</span><span class="s1">&#39;cbc&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">solve</span><span class="p">(</span><span class="n">m</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">m</span>

<span class="n">m</span> <span class="o">=</span> <span class="n">transport</span><span class="p">(</span><span class="n">supply</span><span class="p">,</span> <span class="n">demand</span><span class="p">,</span> <span class="n">rates</span><span class="o">/</span><span class="mi">100</span><span class="p">)</span>

<span class="n">results</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="n">dst</span><span class="p">:</span> <span class="p">{</span><span class="n">src</span><span class="p">:</span> <span class="n">m</span><span class="o">.</span><span class="n">x</span><span class="p">[</span><span class="n">dst</span><span class="p">,</span> <span class="n">src</span><span class="p">]()</span> <span class="k">for</span> <span class="n">src</span> <span class="ow">in</span> <span class="n">m</span><span class="o">.</span><span class="n">SOURCES</span><span class="p">}</span> <span class="k">for</span> <span class="n">dst</span> <span class="ow">in</span> <span class="n">m</span><span class="o">.</span><span class="n">DESTINATIONS</span><span class="p">})</span><span class="o">.</span><span class="n">T</span>
<span class="n">results</span><span class="p">[</span><span class="s2">&quot;current costs&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">700</span><span class="o">*</span><span class="n">demand</span><span class="o">/</span><span class="mi">8000</span>
<span class="n">results</span><span class="p">[</span><span class="s2">&quot;contract costs&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">({</span><span class="n">dst</span><span class="p">:</span> <span class="n">m</span><span class="o">.</span><span class="n">cost_to</span><span class="p">[</span><span class="n">dst</span><span class="p">]()</span> <span class="k">for</span> <span class="n">dst</span> <span class="ow">in</span> <span class="n">m</span><span class="o">.</span><span class="n">DESTINATIONS</span><span class="p">})</span>
<span class="n">results</span><span class="p">[</span><span class="s2">&quot;savings&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">results</span><span class="p">[</span><span class="s2">&quot;current costs&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">round</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="o">-</span> <span class="n">results</span><span class="p">[</span><span class="s2">&quot;contract costs&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">round</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="n">results</span><span class="p">[</span><span class="s2">&quot;marginal cost&quot;</span><span class="p">]</span>  <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">({</span><span class="n">dst</span><span class="p">:</span> <span class="n">m</span><span class="o">.</span><span class="n">dual</span><span class="p">[</span><span class="n">m</span><span class="o">.</span><span class="n">demand_constraint</span><span class="p">[</span><span class="n">dst</span><span class="p">]]</span> <span class="k">for</span> <span class="n">dst</span> <span class="ow">in</span> <span class="n">m</span><span class="o">.</span><span class="n">DESTINATIONS</span><span class="p">})</span>

<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Old Delivery Costs = $ </span><span class="si">{</span><span class="nb">sum</span><span class="p">(</span><span class="n">demand</span><span class="p">)</span><span class="o">*</span><span class="mi">700</span><span class="o">/</span><span class="mi">8000</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;New Delivery Costs = $ </span><span class="si">{</span><span class="n">m</span><span class="o">.</span><span class="n">cost</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="n">display</span><span class="p">(</span><span class="n">results</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Old Delivery Costs = $ 27387.5
New Delivery Costs = $ 26113.5
</pre></div>
</div>
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Terminal A</th>
      <th>Terminal B</th>
      <th>Current Supplier</th>
      <th>current costs</th>
      <th>contract costs</th>
      <th>savings</th>
      <th>marginal cost</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>Alice</th>
      <td>30000.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>2625.0</td>
      <td>2490.0</td>
      <td>135.0</td>
      <td>0.0875</td>
    </tr>
    <tr>
      <th>Badri</th>
      <td>40000.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>3500.0</td>
      <td>3240.0</td>
      <td>260.0</td>
      <td>0.0855</td>
    </tr>
    <tr>
      <th>Cara</th>
      <td>12000.0</td>
      <td>0.0</td>
      <td>38000.0</td>
      <td>4375.0</td>
      <td>4321.0</td>
      <td>54.0</td>
      <td>0.0875</td>
    </tr>
    <tr>
      <th>Dan</th>
      <td>0.0</td>
      <td>20000.0</td>
      <td>0.0</td>
      <td>1750.0</td>
      <td>1600.0</td>
      <td>150.0</td>
      <td>0.0875</td>
    </tr>
    <tr>
      <th>Emma</th>
      <td>0.0</td>
      <td>0.0</td>
      <td>30000.0</td>
      <td>2625.0</td>
      <td>2625.0</td>
      <td>0.0</td>
      <td>0.0875</td>
    </tr>
    <tr>
      <th>Fujita</th>
      <td>0.0</td>
      <td>0.0</td>
      <td>45000.0</td>
      <td>3937.5</td>
      <td>3937.5</td>
      <td>0.0</td>
      <td>0.0875</td>
    </tr>
    <tr>
      <th>Grace</th>
      <td>0.0</td>
      <td>60000.0</td>
      <td>20000.0</td>
      <td>7000.0</td>
      <td>6550.0</td>
      <td>450.0</td>
      <td>0.0875</td>
    </tr>
    <tr>
      <th>Helen</th>
      <td>18000.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>1575.0</td>
      <td>1350.0</td>
      <td>225.0</td>
      <td>0.0795</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
</section>
</section>
<section id="reporting-solutions">
<h2>Reporting Solutions<a class="headerlink" href="#reporting-solutions" title="Permalink to this headline">¶</a></h2>
<p>Pyomo models can produce considerable amounts of data that must be summarized and presented for analysis and decision making. In this application, for example, the individual franchise owners receive differing amounts of savings which is certain to result in considerable discussion and possibly negotiation with the franchisor.</p>
<p>The following cells demonstrate techniques for extracting and displaying information generated by a Pyomo model.</p>
<section id="pyomo-display-method">
<h3>Pyomo <code class="docutils literal notranslate"><span class="pre">.display()</span></code> method<a class="headerlink" href="#pyomo-display-method" title="Permalink to this headline">¶</a></h3>
<p>Pyomo provides a default <code class="docutils literal notranslate"><span class="pre">.display()</span></code> method for most Pyomo objects. The default display is often sufficient for model reporting requirements, particularly when initially developing a new application.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># display elements of sets</span>
<span class="n">m</span><span class="o">.</span><span class="n">SOURCES</span><span class="o">.</span><span class="n">display</span><span class="p">()</span>
<span class="n">m</span><span class="o">.</span><span class="n">DESTINATIONS</span><span class="o">.</span><span class="n">display</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>SOURCES : Size=1, Index=None, Ordered=Insertion
    Key  : Dimen : Domain : Size : Members
    None :     1 :    Any :    3 : {&#39;Terminal A&#39;, &#39;Terminal B&#39;, &#39;Current Supplier&#39;}
DESTINATIONS : Size=1, Index=None, Ordered=Insertion
    Key  : Dimen : Domain : Size : Members
    None :     1 :    Any :    8 : {&#39;Alice&#39;, &#39;Badri&#39;, &#39;Cara&#39;, &#39;Dan&#39;, &#39;Emma&#39;, &#39;Fujita&#39;, &#39;Grace&#39;, &#39;Helen&#39;}
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># display elements of an indexed parameter</span>
<span class="n">m</span><span class="o">.</span><span class="n">Rates</span><span class="o">.</span><span class="n">display</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Rates : Size=24, Index=Rates_index, Domain=Any, Default=None, Mutable=False
    Key                            : Value
     (&#39;Alice&#39;, &#39;Current Supplier&#39;) :              0.0875
           (&#39;Alice&#39;, &#39;Terminal A&#39;) :               0.083
           (&#39;Alice&#39;, &#39;Terminal B&#39;) :               0.102
     (&#39;Badri&#39;, &#39;Current Supplier&#39;) :              0.0875
           (&#39;Badri&#39;, &#39;Terminal A&#39;) :               0.081
           (&#39;Badri&#39;, &#39;Terminal B&#39;) :                0.12
      (&#39;Cara&#39;, &#39;Current Supplier&#39;) :              0.0875
            (&#39;Cara&#39;, &#39;Terminal A&#39;) :               0.083
            (&#39;Cara&#39;, &#39;Terminal B&#39;) :                 1.0
       (&#39;Dan&#39;, &#39;Current Supplier&#39;) :              0.0875
             (&#39;Dan&#39;, &#39;Terminal A&#39;) : 0.09300000000000001
             (&#39;Dan&#39;, &#39;Terminal B&#39;) :                0.08
      (&#39;Emma&#39;, &#39;Current Supplier&#39;) :              0.0875
            (&#39;Emma&#39;, &#39;Terminal A&#39;) : 0.10099999999999999
            (&#39;Emma&#39;, &#39;Terminal B&#39;) :                 0.1
    (&#39;Fujita&#39;, &#39;Current Supplier&#39;) :              0.0875
          (&#39;Fujita&#39;, &#39;Terminal A&#39;) :               0.098
          (&#39;Fujita&#39;, &#39;Terminal B&#39;) :                 0.1
     (&#39;Grace&#39;, &#39;Current Supplier&#39;) :              0.0875
           (&#39;Grace&#39;, &#39;Terminal A&#39;) :                 1.0
           (&#39;Grace&#39;, &#39;Terminal B&#39;) :                0.08
     (&#39;Helen&#39;, &#39;Current Supplier&#39;) :              0.0875
           (&#39;Helen&#39;, &#39;Terminal A&#39;) :               0.075
           (&#39;Helen&#39;, &#39;Terminal B&#39;) :                 0.1
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># display elements of Pyomo Expression</span>
<span class="n">m</span><span class="o">.</span><span class="n">shipped_to</span><span class="o">.</span><span class="n">display</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>shipped_to : Size=8
    Key    : Value
     Alice : 30000.0
     Badri : 40000.0
      Cara : 50000.0
       Dan : 20000.0
      Emma : 30000.0
    Fujita : 45000.0
     Grace : 80000.0
     Helen : 18000.0
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">m</span><span class="o">.</span><span class="n">shipped_from</span><span class="o">.</span><span class="n">display</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>shipped_from : Size=3
    Key              : Value
    Current Supplier : 133000.0
          Terminal A : 100000.0
          Terminal B :  80000.0
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># display Pyomo Objective</span>
<span class="n">m</span><span class="o">.</span><span class="n">cost</span><span class="o">.</span><span class="n">display</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>cost : Size=1, Index=None, Active=True
    Key  : Active : Value
    None :   True : 26113.5
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># display indexed Pyomo Constraint</span>
<span class="n">m</span><span class="o">.</span><span class="n">supply_constraint</span><span class="o">.</span><span class="n">display</span><span class="p">()</span>
<span class="n">m</span><span class="o">.</span><span class="n">demand_constraint</span><span class="o">.</span><span class="n">display</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>supply_constraint : Size=3
    Key              : Lower : Body     : Upper
    Current Supplier :  None : 133000.0 : 500000.0
          Terminal A :  None : 100000.0 : 100000.0
          Terminal B :  None :  80000.0 :  80000.0
demand_constraint : Size=8
    Key    : Lower   : Body    : Upper
     Alice : 30000.0 : 30000.0 :  None
     Badri : 40000.0 : 40000.0 :  None
      Cara : 50000.0 : 50000.0 :  None
       Dan : 20000.0 : 20000.0 :  None
      Emma : 30000.0 : 30000.0 :  None
    Fujita : 45000.0 : 45000.0 :  None
     Grace : 80000.0 : 80000.0 :  None
     Helen : 18000.0 : 18000.0 :  None
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># display Pyomo decision variables</span>
<span class="n">m</span><span class="o">.</span><span class="n">x</span><span class="o">.</span><span class="n">display</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>x : Size=24, Index=x_index
    Key                            : Lower : Value   : Upper : Fixed : Stale : Domain
     (&#39;Alice&#39;, &#39;Current Supplier&#39;) :     0 :     0.0 :  None : False : False : NonNegativeReals
           (&#39;Alice&#39;, &#39;Terminal A&#39;) :     0 : 30000.0 :  None : False : False : NonNegativeReals
           (&#39;Alice&#39;, &#39;Terminal B&#39;) :     0 :     0.0 :  None : False : False : NonNegativeReals
     (&#39;Badri&#39;, &#39;Current Supplier&#39;) :     0 :     0.0 :  None : False : False : NonNegativeReals
           (&#39;Badri&#39;, &#39;Terminal A&#39;) :     0 : 40000.0 :  None : False : False : NonNegativeReals
           (&#39;Badri&#39;, &#39;Terminal B&#39;) :     0 :     0.0 :  None : False : False : NonNegativeReals
      (&#39;Cara&#39;, &#39;Current Supplier&#39;) :     0 : 38000.0 :  None : False : False : NonNegativeReals
            (&#39;Cara&#39;, &#39;Terminal A&#39;) :     0 : 12000.0 :  None : False : False : NonNegativeReals
            (&#39;Cara&#39;, &#39;Terminal B&#39;) :     0 :     0.0 :  None : False : False : NonNegativeReals
       (&#39;Dan&#39;, &#39;Current Supplier&#39;) :     0 :     0.0 :  None : False : False : NonNegativeReals
             (&#39;Dan&#39;, &#39;Terminal A&#39;) :     0 :     0.0 :  None : False : False : NonNegativeReals
             (&#39;Dan&#39;, &#39;Terminal B&#39;) :     0 : 20000.0 :  None : False : False : NonNegativeReals
      (&#39;Emma&#39;, &#39;Current Supplier&#39;) :     0 : 30000.0 :  None : False : False : NonNegativeReals
            (&#39;Emma&#39;, &#39;Terminal A&#39;) :     0 :     0.0 :  None : False : False : NonNegativeReals
            (&#39;Emma&#39;, &#39;Terminal B&#39;) :     0 :     0.0 :  None : False : False : NonNegativeReals
    (&#39;Fujita&#39;, &#39;Current Supplier&#39;) :     0 : 45000.0 :  None : False : False : NonNegativeReals
          (&#39;Fujita&#39;, &#39;Terminal A&#39;) :     0 :     0.0 :  None : False : False : NonNegativeReals
          (&#39;Fujita&#39;, &#39;Terminal B&#39;) :     0 :     0.0 :  None : False : False : NonNegativeReals
     (&#39;Grace&#39;, &#39;Current Supplier&#39;) :     0 : 20000.0 :  None : False : False : NonNegativeReals
           (&#39;Grace&#39;, &#39;Terminal A&#39;) :     0 :     0.0 :  None : False : False : NonNegativeReals
           (&#39;Grace&#39;, &#39;Terminal B&#39;) :     0 : 60000.0 :  None : False : False : NonNegativeReals
     (&#39;Helen&#39;, &#39;Current Supplier&#39;) :     0 :     0.0 :  None : False : False : NonNegativeReals
           (&#39;Helen&#39;, &#39;Terminal A&#39;) :     0 : 18000.0 :  None : False : False : NonNegativeReals
           (&#39;Helen&#39;, &#39;Terminal B&#39;) :     0 :     0.0 :  None : False : False : NonNegativeReals
</pre></div>
</div>
</div>
</div>
</section>
<section id="manually-formatted-reports">
<h3>Manually formatted reports<a class="headerlink" href="#manually-formatted-reports" title="Permalink to this headline">¶</a></h3>
<p>Following solution, the value associated with Pyomo objects are returned by calling the object as a function. The following cell demonstrates the construction of a custom report using Python f-strings and Pyomo methods.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Objective report</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">Objective: cost&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;cost = </span><span class="si">{</span><span class="n">m</span><span class="o">.</span><span class="n">cost</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="c1"># Constraint reports</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">Constraint: supply_constraint&quot;</span><span class="p">)</span>
<span class="k">for</span> <span class="n">src</span> <span class="ow">in</span> <span class="n">m</span><span class="o">.</span><span class="n">SOURCES</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">src</span><span class="si">:</span><span class="s2">12s</span><span class="si">}</span><span class="s2">  </span><span class="si">{</span><span class="n">m</span><span class="o">.</span><span class="n">supply_constraint</span><span class="p">[</span><span class="n">src</span><span class="p">]()</span><span class="si">:</span><span class="s2">8.2f</span><span class="si">}</span><span class="s2">  </span><span class="si">{</span><span class="n">m</span><span class="o">.</span><span class="n">dual</span><span class="p">[</span><span class="n">m</span><span class="o">.</span><span class="n">supply_constraint</span><span class="p">[</span><span class="n">src</span><span class="p">]]</span><span class="si">:</span><span class="s2">8.2f</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">Constraint: demand_constraint&quot;</span><span class="p">)</span>
<span class="k">for</span> <span class="n">dst</span> <span class="ow">in</span> <span class="n">m</span><span class="o">.</span><span class="n">DESTINATIONS</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">dst</span><span class="si">:</span><span class="s2">12s</span><span class="si">}</span><span class="s2">  </span><span class="si">{</span><span class="n">m</span><span class="o">.</span><span class="n">demand_constraint</span><span class="p">[</span><span class="n">dst</span><span class="p">]()</span><span class="si">:</span><span class="s2">8.2f</span><span class="si">}</span><span class="s2">  </span><span class="si">{</span><span class="n">m</span><span class="o">.</span><span class="n">dual</span><span class="p">[</span><span class="n">m</span><span class="o">.</span><span class="n">demand_constraint</span><span class="p">[</span><span class="n">dst</span><span class="p">]]</span><span class="si">:</span><span class="s2">8.2f</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="c1"># Decision variable reports</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">Decision variables: x&quot;</span><span class="p">)</span>
<span class="k">for</span> <span class="n">src</span> <span class="ow">in</span> <span class="n">m</span><span class="o">.</span><span class="n">SOURCES</span><span class="p">:</span>
    <span class="k">for</span> <span class="n">dst</span> <span class="ow">in</span> <span class="n">m</span><span class="o">.</span><span class="n">DESTINATIONS</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">src</span><span class="si">:</span><span class="s2">12s</span><span class="si">}</span><span class="s2"> -&gt; </span><span class="si">{</span><span class="n">dst</span><span class="si">:</span><span class="s2">12s</span><span class="si">}</span><span class="s2">  </span><span class="si">{</span><span class="n">m</span><span class="o">.</span><span class="n">x</span><span class="p">[</span><span class="n">dst</span><span class="p">,</span> <span class="n">src</span><span class="p">]()</span><span class="si">:</span><span class="s2">8.2f</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Objective: cost
cost = 26113.5

Constraint: supply_constraint
Terminal A    100000.00     -0.00
Terminal B    80000.00     -0.01
Current Supplier  133000.00      0.00

Constraint: demand_constraint
Alice         30000.00      0.09
Badri         40000.00      0.09
Cara          50000.00      0.09
Dan           20000.00      0.09
Emma          30000.00      0.09
Fujita        45000.00      0.09
Grace         80000.00      0.09
Helen         18000.00      0.08

Decision variables: x
Terminal A   -&gt; Alice         30000.00
Terminal A   -&gt; Badri         40000.00
Terminal A   -&gt; Cara          12000.00
Terminal A   -&gt; Dan               0.00
Terminal A   -&gt; Emma              0.00
Terminal A   -&gt; Fujita            0.00
Terminal A   -&gt; Grace             0.00
Terminal A   -&gt; Helen         18000.00

Terminal B   -&gt; Alice             0.00
Terminal B   -&gt; Badri             0.00
Terminal B   -&gt; Cara              0.00
Terminal B   -&gt; Dan           20000.00
Terminal B   -&gt; Emma              0.00
Terminal B   -&gt; Fujita            0.00
Terminal B   -&gt; Grace         60000.00
Terminal B   -&gt; Helen             0.00

Current Supplier -&gt; Alice             0.00
Current Supplier -&gt; Badri             0.00
Current Supplier -&gt; Cara          38000.00
Current Supplier -&gt; Dan               0.00
Current Supplier -&gt; Emma          30000.00
Current Supplier -&gt; Fujita        45000.00
Current Supplier -&gt; Grace         20000.00
Current Supplier -&gt; Helen             0.00
</pre></div>
</div>
</div>
</div>
</section>
<section id="pandas">
<h3>Pandas<a class="headerlink" href="#pandas" title="Permalink to this headline">¶</a></h3>
<p>The Python Pandas library provides a highly flexible framework for data science applications. The next cell demonstrates the translation of Pyomo object values to Pandas DataFrames</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">suppliers</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="n">src</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;supply&quot;</span><span class="p">:</span> <span class="n">supply</span><span class="p">[</span><span class="n">src</span><span class="p">],</span> 
                              <span class="s2">&quot;shipped&quot;</span><span class="p">:</span> <span class="n">m</span><span class="o">.</span><span class="n">supply_constraint</span><span class="p">[</span><span class="n">src</span><span class="p">](),</span> 
                              <span class="s2">&quot;sensitivity&quot;</span><span class="p">:</span> <span class="n">m</span><span class="o">.</span><span class="n">dual</span><span class="p">[</span><span class="n">m</span><span class="o">.</span><span class="n">supply_constraint</span><span class="p">[</span><span class="n">src</span><span class="p">]]}</span>
                          <span class="k">for</span> <span class="n">src</span> <span class="ow">in</span> <span class="n">m</span><span class="o">.</span><span class="n">SOURCES</span><span class="p">})</span><span class="o">.</span><span class="n">T</span>

<span class="n">display</span><span class="p">(</span><span class="n">suppliers</span><span class="p">)</span>

<span class="n">customers</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="n">dst</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;demand&quot;</span><span class="p">:</span> <span class="n">demand</span><span class="p">[</span><span class="n">dst</span><span class="p">],</span> 
                              <span class="s2">&quot;shipped&quot;</span><span class="p">:</span> <span class="n">m</span><span class="o">.</span><span class="n">demand_constraint</span><span class="p">[</span><span class="n">dst</span><span class="p">](),</span> 
                              <span class="s2">&quot;sensitivity&quot;</span><span class="p">:</span> <span class="n">m</span><span class="o">.</span><span class="n">dual</span><span class="p">[</span><span class="n">m</span><span class="o">.</span><span class="n">demand_constraint</span><span class="p">[</span><span class="n">dst</span><span class="p">]]}</span>
                          <span class="k">for</span> <span class="n">dst</span> <span class="ow">in</span> <span class="n">m</span><span class="o">.</span><span class="n">DESTINATIONS</span><span class="p">})</span><span class="o">.</span><span class="n">T</span>

<span class="n">display</span><span class="p">(</span><span class="n">customers</span><span class="p">)</span>

<span class="n">shipments</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="n">dst</span><span class="p">:</span> <span class="p">{</span><span class="n">src</span><span class="p">:</span> <span class="n">m</span><span class="o">.</span><span class="n">x</span><span class="p">[</span><span class="n">dst</span><span class="p">,</span> <span class="n">src</span><span class="p">]()</span> <span class="k">for</span> <span class="n">src</span> <span class="ow">in</span> <span class="n">m</span><span class="o">.</span><span class="n">SOURCES</span><span class="p">}</span> <span class="k">for</span> <span class="n">dst</span> <span class="ow">in</span> <span class="n">m</span><span class="o">.</span><span class="n">DESTINATIONS</span><span class="p">})</span><span class="o">.</span><span class="n">T</span>
<span class="n">display</span><span class="p">(</span><span class="n">shipments</span><span class="p">)</span>
<span class="n">shipments</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">kind</span><span class="o">=</span><span class="s2">&quot;bar&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>supply</th>
      <th>shipped</th>
      <th>sensitivity</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>Terminal A</th>
      <td>100000.0</td>
      <td>100000.0</td>
      <td>-0.0045</td>
    </tr>
    <tr>
      <th>Terminal B</th>
      <td>80000.0</td>
      <td>80000.0</td>
      <td>-0.0075</td>
    </tr>
    <tr>
      <th>Current Supplier</th>
      <td>500000.0</td>
      <td>133000.0</td>
      <td>0.0000</td>
    </tr>
  </tbody>
</table>
</div></div><div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>demand</th>
      <th>shipped</th>
      <th>sensitivity</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>Alice</th>
      <td>30000.0</td>
      <td>30000.0</td>
      <td>0.0875</td>
    </tr>
    <tr>
      <th>Badri</th>
      <td>40000.0</td>
      <td>40000.0</td>
      <td>0.0855</td>
    </tr>
    <tr>
      <th>Cara</th>
      <td>50000.0</td>
      <td>50000.0</td>
      <td>0.0875</td>
    </tr>
    <tr>
      <th>Dan</th>
      <td>20000.0</td>
      <td>20000.0</td>
      <td>0.0875</td>
    </tr>
    <tr>
      <th>Emma</th>
      <td>30000.0</td>
      <td>30000.0</td>
      <td>0.0875</td>
    </tr>
    <tr>
      <th>Fujita</th>
      <td>45000.0</td>
      <td>45000.0</td>
      <td>0.0875</td>
    </tr>
    <tr>
      <th>Grace</th>
      <td>80000.0</td>
      <td>80000.0</td>
      <td>0.0875</td>
    </tr>
    <tr>
      <th>Helen</th>
      <td>18000.0</td>
      <td>18000.0</td>
      <td>0.0795</td>
    </tr>
  </tbody>
</table>
</div></div><div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Terminal A</th>
      <th>Terminal B</th>
      <th>Current Supplier</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>Alice</th>
      <td>30000.0</td>
      <td>0.0</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>Badri</th>
      <td>40000.0</td>
      <td>0.0</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>Cara</th>
      <td>12000.0</td>
      <td>0.0</td>
      <td>38000.0</td>
    </tr>
    <tr>
      <th>Dan</th>
      <td>0.0</td>
      <td>20000.0</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>Emma</th>
      <td>0.0</td>
      <td>0.0</td>
      <td>30000.0</td>
    </tr>
    <tr>
      <th>Fujita</th>
      <td>0.0</td>
      <td>0.0</td>
      <td>45000.0</td>
    </tr>
    <tr>
      <th>Grace</th>
      <td>0.0</td>
      <td>60000.0</td>
      <td>20000.0</td>
    </tr>
    <tr>
      <th>Helen</th>
      <td>18000.0</td>
      <td>0.0</td>
      <td>0.0</td>
    </tr>
  </tbody>
</table>
</div></div><div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;AxesSubplot:&gt;
</pre></div>
</div>
<img alt="../../_images/transportation_17_4.png" src="../../_images/transportation_17_4.png" />
</div>
</div>
</section>
<section id="graphviz">
<h3>Graphviz<a class="headerlink" href="#graphviz" title="Permalink to this headline">¶</a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">graphviz</span></code> utility is a collection of tools for visually graphs and directed graphs. Unfortunately, the package can be troublesome to install on laptops in a way that is compatable with many JupyterLab installations. Accordingly, the following cell is intended for use on Google Colab which provides a preinstalled version of <code class="docutils literal notranslate"><span class="pre">graphviz</span></code>.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">graphviz</span>
<span class="kn">from</span> <span class="nn">graphviz</span> <span class="kn">import</span> <span class="n">Digraph</span>
<span class="kn">import</span> <span class="nn">sys</span>

<span class="k">if</span> <span class="s2">&quot;google.colab&quot;</span> <span class="ow">in</span> <span class="n">sys</span><span class="o">.</span><span class="n">modules</span><span class="p">:</span>

    <span class="n">dot</span> <span class="o">=</span> <span class="n">Digraph</span><span class="p">(</span>
        <span class="n">node_attr</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;fontsize&quot;</span><span class="p">:</span> <span class="s2">&quot;10&quot;</span><span class="p">,</span> <span class="s2">&quot;shape&quot;</span><span class="p">:</span> <span class="s2">&quot;rectangle&quot;</span><span class="p">,</span> <span class="s2">&quot;style&quot;</span><span class="p">:</span> <span class="s2">&quot;filled&quot;</span><span class="p">},</span>
        <span class="n">edge_attr</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;fontsize&quot;</span><span class="p">:</span> <span class="s2">&quot;10&quot;</span><span class="p">}</span>
    <span class="p">)</span>

    <span class="k">for</span> <span class="n">src</span> <span class="ow">in</span> <span class="n">m</span><span class="o">.</span><span class="n">SOURCES</span><span class="p">:</span>
        <span class="n">label</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">src</span><span class="si">}</span><span class="s2">&quot;</span> \
                <span class="o">+</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">supply = </span><span class="si">{</span><span class="n">supply</span><span class="p">[</span><span class="n">src</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span> \
                <span class="o">+</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">shipped = </span><span class="si">{</span><span class="n">m</span><span class="o">.</span><span class="n">supply_constraint</span><span class="p">[</span><span class="n">src</span><span class="p">]()</span><span class="si">}</span><span class="s2">&quot;</span> \
                <span class="o">+</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">sens  = </span><span class="si">{</span><span class="n">m</span><span class="o">.</span><span class="n">dual</span><span class="p">[</span><span class="n">m</span><span class="o">.</span><span class="n">supply_constraint</span><span class="p">[</span><span class="n">src</span><span class="p">]]</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="n">dot</span><span class="o">.</span><span class="n">node</span><span class="p">(</span><span class="n">src</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="n">label</span><span class="p">,</span> <span class="n">fillcolor</span><span class="o">=</span><span class="s2">&quot;lightblue&quot;</span><span class="p">)</span>

    <span class="k">for</span> <span class="n">dst</span> <span class="ow">in</span> <span class="n">m</span><span class="o">.</span><span class="n">DESTINATIONS</span><span class="p">:</span>
        <span class="n">label</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">dst</span><span class="si">}</span><span class="s2">&quot;</span> \
                <span class="o">+</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">demand = </span><span class="si">{</span><span class="n">demand</span><span class="p">[</span><span class="n">dst</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span>\
                <span class="o">+</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">shipped = </span><span class="si">{</span><span class="n">m</span><span class="o">.</span><span class="n">demand_constraint</span><span class="p">[</span><span class="n">dst</span><span class="p">]()</span><span class="si">}</span><span class="s2">&quot;</span> \
                <span class="o">+</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">sens  = </span><span class="si">{</span><span class="n">m</span><span class="o">.</span><span class="n">dual</span><span class="p">[</span><span class="n">m</span><span class="o">.</span><span class="n">demand_constraint</span><span class="p">[</span><span class="n">dst</span><span class="p">]]</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="n">dot</span><span class="o">.</span><span class="n">node</span><span class="p">(</span><span class="n">dst</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="n">label</span><span class="p">,</span> <span class="n">fillcolor</span><span class="o">=</span><span class="s2">&quot;gold&quot;</span><span class="p">)</span>

    <span class="k">for</span> <span class="n">src</span> <span class="ow">in</span> <span class="n">m</span><span class="o">.</span><span class="n">SOURCES</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">dst</span> <span class="ow">in</span> <span class="n">m</span><span class="o">.</span><span class="n">DESTINATIONS</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">m</span><span class="o">.</span><span class="n">x</span><span class="p">[</span><span class="n">dst</span><span class="p">,</span> <span class="n">src</span><span class="p">]()</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                <span class="n">dot</span><span class="o">.</span><span class="n">edge</span><span class="p">(</span><span class="n">src</span><span class="p">,</span> <span class="n">dst</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;rate = </span><span class="si">{</span><span class="n">rates</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">dst</span><span class="p">,</span> <span class="n">src</span><span class="p">]</span><span class="si">}</span><span class="se">\n</span><span class="s2">shipped = </span><span class="si">{</span><span class="n">m</span><span class="o">.</span><span class="n">x</span><span class="p">[</span><span class="n">dst</span><span class="p">,</span> <span class="n">src</span><span class="p">]()</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="n">display</span><span class="p">(</span><span class="n">dot</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</section>
</section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            kernelName: "python3",
            path: "./notebooks/02"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

              </div>
              
            
                <!-- Previous / next buttons -->
<div class='prev-next-area'> 
    <a class='left-prev' id="prev-link" href="regression-wine-quality.html" title="previous page">
        <i class="fas fa-angle-left"></i>
        <div class="prev-next-info">
            <p class="prev-next-subtitle">previous</p>
            <p class="prev-next-title">A Wine Quality Dataset</p>
        </div>
    </a>
    <a class='right-next' id="next-link" href="making-the-best-of-the-worst.html" title="next page">
    <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Making the Best of the Worst</p>
    </div>
    <i class="fas fa-angle-right"></i>
    </a>
</div>
            
        </div>
    </div>
    <footer class="footer">
  <p>
    
      By The MO Book group<br/>
    
        &copy; Copyright 2021.<br/>
  </p>
</footer>
</main>


      </div>
    </div>
  
  <script src="../../_static/js/index.be7d3bbb2ef33a8344ce.js"></script>

  </body>
</html>